<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:p="http://primefaces.org/ui"
	xmlns:b="http://bootsfaces.net/ui"
	xmlns:f="http://java.sun.com/jsf/core">

<ui:composition
	template="/PROYECTO_pages/PROYECTO_secure/primefaces/commonLayoutLogin.xhtml">

	<ui:define name="content">
	   <p:growl id="mensajes" showDetail="true" life="2000" />
		<div class="container">
			<div class="panel panel-primary">
				<div class="panel-heading">Login</div>
				<div class="panel-body">
					<h4>Accede a tu cuenta</h4>
					<br/>
					<h:form role="form">
						<div class="form-gruop">
							<label for="username">Usuario:</label>
							<b:inputText id="username" value="#{loginBean.username}"
								styleClass="form-control"
								required="true"
								validatorMessage="Ingrese un usuario v치lido">
								<f:validateLength minimum="1" maximum="20" />
							</b:inputText>
							<b:message for="username" display="username"
								styleClass="text-danger" />
						</div>

						<div class="form-gruop">
							<label for="password">Contrase침a:</label>
							<b:inputText id="password" value="#{loginBean.password}"
								type="password" styleClass="form-control"
								required="true"
								validatorMessage="Ingrese contrase침a v치lida">
								<f:validateLength minimum="3" maximum="100" />
							</b:inputText>
							<b:message for="password" display="password"
								styleClass="text-danger" />
						</div>

						<br />
						<div class="container">
						<p:commandButton value="Submit" update=":mensajes"
						    ajax="true"
							actionListener="#{loginBean.login}"
							oncomplete="manejarLogin(xhr, status, args)"
							styleClass="btn btn-primary" />
							
						</div>
					</h:form>
				</div>
				
				<br />
			</div>
		</div>
		 <script type="text/javascript">
		 //<![CDATA[
		  function manejarLogin(xhr, status, args) {  
		    if (!args.validationFailed && args.estaLogueado) {
		      setTimeout(function() {
		        window.location = args.view;
		      }, 500);
		    }
		  }
		//]]>
 		 </script>
	</ui:define>
</ui:composition>


</html>
